<!DOCTYPE html>
<html lang="bn" class="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® - PhysFlow</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class'
    }
  </script>
  <style>
    .prose { max-width: none; }
    .prose img { max-width: 100%; height: auto; }
    .prose pre { background: #1e293b; color: #e2e8f0; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
    .prose code { background: #f1f5f9; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-size: 0.875rem; }
    .dark .prose code { background: #334155; color: #e2e8f0; }
    .prose a { color: #2563eb; text-decoration: underline; }
    .dark .prose a { color: #60a5fa; }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
  <!-- Header -->
  <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-14">
        <a href="/" class="text-xl font-bold text-blue-600 dark:text-blue-400">PhysFlow</a>
        <div class="flex items-center gap-3">
          <button onclick="toggleTheme()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded">
            <span id="theme-icon">üåô</span>
          </button>
          <button id="auth-btn" onclick="signInWithGoogle()" 
                  class="px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium">
            ‡¶≤‡¶ó‡¶á‡¶®
          </button>
          <div id="user-menu" class="hidden items-center gap-2 cursor-pointer relative" onclick="toggleUserDropdown()">
            <img src="" alt="User" class="w-8 h-8 rounded-full">
            <span class="username text-sm hidden md:inline"></span>
            <div id="user-dropdown" class="hidden absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow-lg z-50">
              <a href="#" onclick="event.preventDefault(); window.location.href='/profile.html?user=' + currentUser?.email?.split('@')[0]" 
                 class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</a>
              <button onclick="signOut()" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 dark:text-red-400">
                ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container mx-auto px-4 py-6 max-w-5xl">
    <!-- Question -->
    <div id="question-container" class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6">
      <!-- Question will be loaded here -->
    </div>

    <!-- Answers -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
      <h2 id="answer-count" class="text-xl font-medium mb-4">0 ‡¶â‡¶§‡ßç‡¶§‡¶∞</h2>
      
      <div id="answers-container">
        <!-- Answers will be loaded here -->
      </div>

      <!-- Answer Form -->
      <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-medium mb-4">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞</h3>
        <textarea id="answer-body" 
                  placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®... Markdown ‡¶∏‡¶Æ‡¶∞‡ßç‡¶•‡¶ø‡¶§"
                  class="w-full h-48 px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"></textarea>
        <button onclick="submitAnswer()" 
                class="mt-3 px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-medium">
          ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
        </button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/javascript/supabase-config.js"></script>
  <script src="/javascript/layout.js"></script>
  <script src="/javascript/auth.js"></script>
  <script src="/javascript/question.js"></script>
</body>
</html>
